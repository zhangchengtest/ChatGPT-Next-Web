"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6527],{658:function(e,t,r){r.d(t,{Y:function(){return a}});var n=r(4963);function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,r]=(0,n.lr)();if(void 0===e)return;let a=!1;t.forEach((r,n)=>{"function"==typeof e[n]&&(e[n](r),t.delete(n),a=!0)}),a&&r(t)}},5897:function(e,t,r){r.r(t),r.d(t,{Chat:function(){return eQ},ChatActions:function(){return eL},PromptHints:function(){return eI},SessionConfigModel:function(){return eA}});var n,a,s,l,o,i,c,m,h,u,d,p,f,g,v,k,y,w,x,E,_,b,j,C,M,O,P,D,N,Z,H=r(9268),S=r(6006);function W(e,t,r){var n=this,a=(0,S.useRef)(null),s=(0,S.useRef)(0),l=(0,S.useRef)(null),o=(0,S.useRef)([]),i=(0,S.useRef)(),c=(0,S.useRef)(),m=(0,S.useRef)(e),h=(0,S.useRef)(!0);(0,S.useEffect)(function(){m.current=e},[e]);var u=!t&&0!==t&&"undefined"!=typeof window;if("function"!=typeof e)throw TypeError("Expected a function");t=+t||0;var d=!!(r=r||{}).leading,p=!("trailing"in r)||!!r.trailing,f="maxWait"in r,g=f?Math.max(+r.maxWait||0,t):null;return(0,S.useEffect)(function(){return h.current=!0,function(){h.current=!1}},[]),(0,S.useMemo)(function(){var e=function(e){var t=o.current,r=i.current;return o.current=i.current=null,s.current=e,c.current=m.current.apply(r,t)},r=function(e,t){u&&cancelAnimationFrame(l.current),l.current=u?requestAnimationFrame(e):setTimeout(e,t)},v=function(e){if(!h.current)return!1;var r=e-a.current;return!a.current||r>=t||r<0||f&&e-s.current>=g},k=function(t){return l.current=null,p&&o.current?e(t):(o.current=i.current=null,c.current)},y=function e(){var n=Date.now();if(v(n))return k(n);if(h.current){var l=t-(n-a.current);r(e,f?Math.min(l,g-(n-s.current)):l)}},w=function(){var m=Date.now(),u=v(m);if(o.current=[].slice.call(arguments),i.current=n,a.current=m,u){if(!l.current&&h.current)return s.current=a.current,r(y,t),d?e(a.current):c.current;if(f)return r(y,t),e(a.current)}return l.current||r(y,t),c.current};return w.cancel=function(){l.current&&(u?cancelAnimationFrame(l.current):clearTimeout(l.current)),s.current=0,o.current=a.current=i.current=l.current=null},w.isPending=function(){return!!l.current},w.flush=function(){return l.current?k(Date.now()):c.current},w},[d,f,t,g,p,u])}var K=r(6254);function z(){return(z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var R=function(e){return K.createElement("svg",z({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),n||(n=K.createElement("defs",null,K.createElement("path",{id:"send-white_svg__a",d:"M0 0h16v16H0z"}))),K.createElement("g",null,a||(a=K.createElement("mask",{id:"send-white_svg__b",fill:"#fff"},K.createElement("use",{xlinkHref:"#send-white_svg__a"}))),K.createElement("g",{mask:"url(#send-white_svg__b)"},K.createElement("path",{style:{stroke:"#fff",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(1.333 2)",d:"M0 4.71 6.67 6l1.67 6.67L12.67 0 0 4.71Z"}),K.createElement("path",{style:{stroke:"#fff",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(8.003 6.117)",d:"M0 1.89 1.89 0"}))))};function A(){return(A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var T=function(e){return K.createElement("svg",A({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),s||(s=K.createElement("defs",null,K.createElement("path",{id:"brain_svg__a",d:"M0 0h16v16H0z"}))),K.createElement("g",null,l||(l=K.createElement("mask",{id:"brain_svg__b",fill:"#fff"},K.createElement("use",{xlinkHref:"#brain_svg__a"}))),K.createElement("g",{mask:"url(#brain_svg__b)"},K.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(1.333 1.333)",d:"M5.01 13.33c-.32-1.06-.82-1.86-1.48-2.38-.98-.78-2.56-.3-3.14-1.11-.58-.8.41-2.29.76-3.17.34-.88-1.33-1.19-1.13-1.44.13-.16.97-.64 2.53-1.44C3 1.26 4.63 0 7.47 0c4.24 0 5.86 3.6 5.86 5.89 0 2.29-1.96 4.76-4.75 5.29-.25.37.11 1.08 1.08 2.15"}),K.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(6.374 3.957)",d:"M2.1 3.33c-.19 1.09.04 1.6.69 1.53.65-.07 1.05-.34 1.18-.81 1.02.28 1.57.04 1.66-.72.12-1.15-.5-2.07-.75-2.07s-.91-.03-.91-.38C3.97.52 3.2.33 2.5.33c-.69 0-.27-.47-1.23-.29C.64.17.26.44.13.88c-.22.84-.16 1.43.19 1.78.35.34.94.56 1.78.67Z"}),K.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(8.193 8.5)",d:"M1.97 0c-.34.21-.8.56-1 .83-.49.69-.88 1.1-.97 1.54"}))))};function I(){return(I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var X=function(e){return K.createElement("svg",I({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),o||(o=K.createElement("defs",null,K.createElement("path",{id:"rename_svg__a",d:"M0 0h16v16H0z"}))),K.createElement("g",null,i||(i=K.createElement("mask",{id:"rename_svg__b",fill:"#fff"},K.createElement("use",{xlinkHref:"#rename_svg__a"}))),K.createElement("g",{mask:"url(#rename_svg__b)"},K.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(1.775 1.3)",d:"M2.83 13.2 13.2 2.83 10.37 0 0 10.37v2.83h2.83Z"}),K.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(9.317 4.13)",d:"m0 0 2.83 2.83"}))))};function L(){return(L=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Q=function(e){return K.createElement("svg",L({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),c||(c=K.createElement("defs",null,K.createElement("path",{id:"share_svg__a",d:"M0 0h16v16H0z"}))),K.createElement("g",null,m||(m=K.createElement("mask",{id:"share_svg__b",fill:"#fff"},K.createElement("use",{xlinkHref:"#share_svg__a"}))),K.createElement("g",{mask:"url(#share_svg__b)"},K.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(2 1.333)",d:"M6.67 3.67C1.67 3.67 0 7.33 0 13c0 0 2-5 6.67-5v3.67l6-5.67-6-6v3.67Z"}))))};function B(){return(B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var F=function(e){return K.createElement("svg",B({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),h||(h=K.createElement("defs",null,K.createElement("path",{id:"return_svg__a",d:"M0 0h16v16H0z"}))),K.createElement("g",null,u||(u=K.createElement("mask",{id:"return_svg__b",fill:"#fff"},K.createElement("use",{xlinkHref:"#return_svg__a"}))),K.createElement("g",{mask:"url(#return_svg__b)"},K.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(2 2.667)",d:"M2.33 0 0 2l2.33 2.33"}),K.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(2 4.667)",d:"M0 0h7.66c2.3 0 4.25 1.87 4.34 4.17.09 2.42-1.91 4.5-4.34 4.5H2"}))))},U=r(6011),V=r(3186),G=r(359);function Y(){return(Y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var $=function(e){return K.createElement("svg",Y({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),d||(d=K.createElement("defs",null,K.createElement("path",{id:"prompt_svg__a",d:"M0 0h16v16H0z"}))),K.createElement("g",null,p||(p=K.createElement("mask",{id:"prompt_svg__b",fill:"#fff"},K.createElement("use",{xlinkHref:"#prompt_svg__a"}))),K.createElement("g",{mask:"url(#prompt_svg__b)"},K.createElement("path",{style:{stroke:"#333",strokeWidth:1.3,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(5.333 1.333)",d:"m1.367 1.367 1.41 1.41M4.667 0v2m0 0V0m3.295 1.367-1.41 1.41m0 0 1.41-1.41m1.371 3.3h-2m0 0h2m-1.37 3.295-1.41-1.41m0 0 1.41 1.41M4.666 9.333v-2m0 0v2m-3.3-1.37 1.41-1.41m0 0-1.41 1.41M0 4.666h2m0 0H0"}),K.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(1.848 6.138)",d:"M8.01 0 0 8.01"}))))},q=r(2095);function J(){return(J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var ee=function(e){return K.createElement("svg",J({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),f||(f=K.createElement("defs",null,K.createElement("path",{id:"max_svg__a",d:"M0 0h16v16H0z"}))),K.createElement("g",null,g||(g=K.createElement("mask",{id:"max_svg__b",fill:"#fff"},K.createElement("use",{xlinkHref:"#max_svg__a"}))),K.createElement("g",{mask:"url(#max_svg__b)"},K.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(2 2)",d:"m0 0 3.33 3.3"}),K.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(2 10.667)",d:"M0 3.3 3.33 0"}),K.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(10.7 10.667)",d:"M3.3 3.3 0 0"}),K.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(10.667 2)",d:"M3.3 0 0 3.3"}),K.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(11 2)",d:"M0 0h3v3"}),K.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(11 11)",d:"M3 0v3H0"}),K.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(2 11)",d:"M3 3H0V0"}),K.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(2 2)",d:"M0 3V0h3"}))))};function et(){return(et=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var er=function(e){return K.createElement("svg",et({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),v||(v=K.createElement("defs",null,K.createElement("path",{id:"min_svg__a",d:"M0 0h16v16H0z"}))),K.createElement("g",null,k||(k=K.createElement("mask",{id:"min_svg__b",fill:"#fff"},K.createElement("use",{xlinkHref:"#min_svg__a"}))),K.createElement("g",{mask:"url(#min_svg__b)"},K.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(2 2)",d:"m0 0 3.33 3.3"}),K.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(2 10.667)",d:"M0 3.3 3.33 0"}),K.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(10.7 10.667)",d:"M3.3 3.3 0 0"}),K.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(10.667 2)",d:"M3.3 0 0 3.3"}),K.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(10.667 2.333)",d:"M0 0v3h3"}),K.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(2.333 2.333)",d:"M3 0v3H0"}),K.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(2.333 10.667)",d:"M3 3V0H0"}),K.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(10.667 10.667)",d:"M0 3V0h2.97"}))))},en=r(1150);function ea(){return(ea=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var es=function(e){return K.createElement("svg",ea({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),K.createElement("path",{style:{fill:"#333",opacity:1},d:"M13.275-.275c.261.26.392.576.392.945v10.66c0 .37-.131.684-.392.945a1.288 1.288 0 0 1-.945.392H1.67c-.37 0-.684-.13-.945-.392a1.288 1.288 0 0 1-.392-.945V.67c0-.37.13-.684.392-.945.26-.261.576-.392.945-.392h10.66c.369 0 .684.13.945.392zM1.667 11.33c0 .002 0 .003.003.003h10.66c.002 0 .003 0 .003-.003V.67c0-.002 0-.003-.003-.003H1.67c-.002 0-.003 0-.003.003z",transform:"translate(1 2)"}),K.createElement("path",{style:{fill:"#333",opacity:1},d:"M9.763 7.507a.666.666 0 0 1-.867 0L7 5.878 5.104 7.506a.665.665 0 0 1-.867.001L2.331 5.878.434 7.506a.66.66 0 0 1-.485.16.66.66 0 0 1-.53-.338.665.665 0 0 1 .147-.834l2.33-2a.666.666 0 0 1 .867 0L4.67 6.123l1.897-1.629a.666.666 0 0 1 .868 0l1.897 1.629 1.906-1.63a.668.668 0 0 1 .867.002l2.33 2a.66.66 0 0 1 .23.455.661.661 0 0 1-.252.575.666.666 0 0 1-.846-.019l-1.897-1.628z",transform:"translate(1 2)"}),y||(y=K.createElement("g",null,K.createElement("mask",{id:"break_svg__b",fill:"#fff"},K.createElement("use",{xlinkHref:"#break_svg__a"})))),w||(w=K.createElement("defs",null,K.createElement("path",{id:"break_svg__a",d:"M0 0h16v16H0z"}))))};function el(){return(el=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var eo=function(e){return K.createElement("svg",el({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),K.createElement("g",null,x||(x=K.createElement("mask",{id:"chat-settings_svg__b",fill:"#fff"},K.createElement("use",{xlinkHref:"#chat-settings_svg__a"}))),K.createElement("g",{mask:"url(#chat-settings_svg__b)"},K.createElement("path",{style:{fill:"#333",opacity:1},d:"M6.728 14.598a.665.665 0 0 1-.828.434 7.294 7.294 0 0 1-3.187-1.945.666.666 0 0 1-.026-.896c.207-.241.31-.527.31-.857 0-.37-.13-.685-.389-.944A1.286 1.286 0 0 0 1.663 10h-.08a.662.662 0 0 1-.665-.288.665.665 0 0 1-.098-.235 7.234 7.234 0 0 1 .188-3.675.662.662 0 0 1 .635-.465h.02c.37 0 .684-.13.944-.392.26-.26.39-.574.39-.942 0-.215-.045-.415-.134-.6a.666.666 0 0 1 .148-.78A7.292 7.292 0 0 1 6.034.932a.666.666 0 0 1 .774.34c.11.219.272.394.483.524.216.135.454.202.712.202.254 0 .488-.067.703-.201.211-.131.372-.306.483-.524a.666.666 0 0 1 .773-.34 7.404 7.404 0 0 1 3.03 1.688.664.664 0 0 1 .143.8c-.09.174-.135.368-.135.583 0 .366.13.68.392.941.262.262.575.393.941.393h.03a.664.664 0 0 1 .636.465c.22.695.331 1.43.331 2.201a7.34 7.34 0 0 1-.143 1.474.66.66 0 0 1-.27.411.666.666 0 0 1-.478.115 1 1 0 0 0-.106-.003c-.367 0-.681.13-.941.39-.261.26-.392.574-.392.943 0 .322.106.61.317.865a.662.662 0 0 1 .1.686.671.671 0 0 1-.133.202 7.294 7.294 0 0 1-3.187 1.945.674.674 0 0 1-.503-.047.659.659 0 0 1-.325-.387 1.311 1.311 0 0 0-.477-.667 1.288 1.288 0 0 0-.789-.26c-.297 0-.564.087-.798.26-.23.17-.389.393-.477.667zm3.52-1.032c.626-.253 1.191-.6 1.696-1.042a2.603 2.603 0 0 1-.277-1.19 2.642 2.642 0 0 1 .784-1.888 2.646 2.646 0 0 1 1.51-.753 6.393 6.393 0 0 0-.118-2.067 2.655 2.655 0 0 1-1.394-.738 2.656 2.656 0 0 1-.782-1.884c0-.239.029-.468.087-.687a6.05 6.05 0 0 0-1.693-.954c-.182.22-.398.41-.65.566-.431.268-.9.402-1.408.402-.511 0-.983-.134-1.414-.401a2.632 2.632 0 0 1-.653-.567 5.936 5.936 0 0 0-1.69.957 2.74 2.74 0 0 1-.125 1.72c-.134.319-.324.601-.57.847a2.641 2.641 0 0 1-1.389.738 5.903 5.903 0 0 0-.12 2.069 2.642 2.642 0 0 1 1.509.753 2.654 2.654 0 0 1 .779 1.888c0 .433-.091.831-.274 1.192.504.44 1.068.787 1.692 1.04.172-.272.393-.507.664-.707.47-.348 1-.522 1.591-.522.587 0 1.115.174 1.584.523.27.2.49.435.661.705z"}),K.createElement("path",{style:{fill:"#333",opacity:1},d:"M10.122 10.122a2.987 2.987 0 0 1-2.125.881 2.969 2.969 0 0 1-2.122-.883 2.983 2.983 0 0 1-.64-.955A2.984 2.984 0 0 1 5 7.997a2.974 2.974 0 0 1 .876-2.12A2.974 2.974 0 0 1 7.996 5c.407 0 .797.078 1.169.235.36.151.678.364.955.64a2.969 2.969 0 0 1 .883 2.122 2.987 2.987 0 0 1-.881 2.125zM7.997 6.333c-.461 0-.854.162-1.178.486a1.603 1.603 0 0 0-.486 1.178c0 .462.163.857.488 1.183.324.327.716.49 1.176.49.46 0 .855-.164 1.182-.491.327-.327.491-.721.491-1.182 0-.46-.163-.852-.49-1.176a1.618 1.618 0 0 0-1.183-.488z"}))),E||(E=K.createElement("defs",null,K.createElement("path",{id:"chat-settings_svg__a",d:"M0 0h16v16H0z"}))))};function ei(){return(ei=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var ec=function(e){return K.createElement("svg",ei({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),_||(_=K.createElement("defs",null,K.createElement("path",{id:"light_svg__a",d:"M0 0h16v16H0z"}))),K.createElement("g",null,b||(b=K.createElement("mask",{id:"light_svg__b",fill:"#fff"},K.createElement("use",{xlinkHref:"#light_svg__a"}))),K.createElement("g",{mask:"url(#light_svg__b)"},K.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(3.667 3.667)",d:"M8.67 4.33C8.67 1.94 6.73 0 4.33 0 1.94 0 0 1.94 0 4.33a4.334 4.334 0 1 0 8.67 0Z"}),K.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},transform:"translate(7.167 .333)",d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z"}),K.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},transform:"translate(12 2.333)",d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z"}),K.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},transform:"translate(14 7.167)",d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z"}),K.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},transform:"translate(12 12)",d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z"}),K.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},transform:"translate(7.167 14)",d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z"}),K.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},transform:"translate(2.333 12)",d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z"}),K.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},transform:"translate(.333 7.167)",d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z"}),K.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},transform:"translate(2.333 2.333)",d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z"}))))};function em(){return(em=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var eh=function(e){return K.createElement("svg",em({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),j||(j=K.createElement("defs",null,K.createElement("path",{id:"dark_svg__a",d:"M0 0h16v16H0z"}))),K.createElement("g",null,C||(C=K.createElement("mask",{id:"dark_svg__b",fill:"#fff"},K.createElement("use",{xlinkHref:"#dark_svg__a"}))),K.createElement("g",{mask:"url(#dark_svg__b)"},K.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(1.333 1.333)",d:"M6.67 0C2.98 0 0 2.98 0 6.67a6.66 6.66 0 0 0 6.67 6.66c3.68 0 6.66-2.98 6.66-6.66 0-.47-.04-.92-.13-1.35a4.251 4.251 0 0 1-4.11 3.16c-2.34 0-4.24-1.89-4.24-4.24 0-1.97 1.34-3.63 3.17-4.1C7.58.05 7.13 0 6.67 0Z"}))))};function eu(){return(eu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var ed=function(e){return K.createElement("svg",eu({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),M||(M=K.createElement("defs",null,K.createElement("path",{id:"auto_svg__a",d:"M0 0h16v16H0z"}))),K.createElement("g",null,O||(O=K.createElement("mask",{id:"auto_svg__b",fill:"#fff"},K.createElement("use",{xlinkHref:"#auto_svg__a"}))),K.createElement("g",{mask:"url(#auto_svg__b)"},K.createElement("path",{style:{stroke:"#333",strokeWidth:1,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(5.667 5.333)",d:"m0 5.337.73-1.67m3.938 1.67-.73-1.67M.728 3.67 2.33 0l1.61 3.67M.73 3.667h3.21"}),K.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(1.333 1.333)",d:"M13.07 5.33A6.672 6.672 0 0 0 0 5.33l2-.66"}),K.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(1.333 9.333)",d:"M0 0a6.672 6.672 0 0 0 13.07 0l-1.74.67"}))))};function ep(){return(ep=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var ef=function(e){return K.createElement("svg",ep({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),P||(P=K.createElement("defs",null,K.createElement("path",{id:"bottom_svg__a",d:"M0 0h16v16H0z"}))),K.createElement("g",null,D||(D=K.createElement("mask",{id:"bottom_svg__b",fill:"#fff"},K.createElement("use",{xlinkHref:"#bottom_svg__a"}))),K.createElement("g",{mask:"url(#bottom_svg__b)"},K.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(4 4)",d:"M8 0 4 4 0 0"}),K.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(4 8)",d:"M8 0 4 4 0 0"}))))};function eg(){return(eg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var ev=function(e){return K.createElement("svg",eg({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),N||(N=K.createElement("defs",null,K.createElement("path",{id:"pause_svg__a",d:"M0 0h16v16H0z"}))),K.createElement("g",null,Z||(Z=K.createElement("mask",{id:"pause_svg__b",fill:"#fff"},K.createElement("use",{xlinkHref:"#pause_svg__a"}))),K.createElement("g",{mask:"url(#pause_svg__b)"},K.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(1.333 1.333)",d:"M13.33 6.67A6.66 6.66 0 0 0 6.67 0C2.98 0 0 2.98 0 6.67a6.66 6.66 0 0 0 6.67 6.66c3.68 0 6.66-2.98 6.66-6.66Z"}),K.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(6.333 6)",d:"M0 0v4"}),K.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(9.667 6)",d:"M0 0v4"}))))},ek=r(2220),ey=r(3514),ew=r(9234),ex=r.n(ew),eE=r(4046),e_=r(7598),eb=r(5262),ej=r(5911),eC=r(1034),eM=r.n(eC),eO=r(6551),eP=r.n(eO),eD=r(2356),eN=r(7005),eZ=r(6819),eH=r(9913),eS=r(6646),eW=r(3914),eK=r(658),ez=r(2121);let eR=ex()(async()=>(await Promise.all([r.e(5659),r.e(7390),r.e(1829)]).then(r.bind(r,1829))).Markdown,{loadableGenerated:{webpack:()=>[1829]},loading:()=>(0,H.jsx)(G.Z,{})});function eA(e){let t=(0,ek.aK)(),r=t.currentSession(),n=(0,eW.Zy)(),a=(0,eN.s0)();return(0,H.jsx)("div",{className:"modal-mask",children:(0,H.jsx)(eD.u_,{title:eb.ZP.Context.Edit,onClose:()=>e.onClose(),actions:[(0,H.jsx)(ej.h,{icon:(0,H.jsx)(en.Z,{}),bordered:!0,text:eb.ZP.Chat.Config.Reset,onClick:()=>{confirm(eb.ZP.Memory.ResetConfirm)&&t.updateCurrentSession(e=>e.memoryPrompt="")}},"reset"),(0,H.jsx)(ej.h,{icon:(0,H.jsx)(U.Z,{}),bordered:!0,text:eb.ZP.Chat.Config.SaveAs,onClick:()=>{a(eZ.y$.Masks),setTimeout(()=>{n.create(r.mask)},500)}},"copy")],children:(0,H.jsx)(eS.MaskConfig,{mask:r.mask,updateMask:e=>{let n={...r.mask};e(n),t.updateCurrentSession(e=>e.mask=n)},shouldSyncFromGlobal:!0,extraListItems:r.mask.modelConfig.sendMemory?(0,H.jsx)(eD.HC,{title:"".concat(eb.ZP.Memory.Title," (").concat(r.lastSummarizeIndex," of ").concat(r.messages.length,")"),subTitle:r.memoryPrompt||eb.ZP.Memory.EmptyContent}):(0,H.jsx)(H.Fragment,{})})})})}function eT(e){let t=(0,ek.aK)(),r=t.currentSession(),n=r.mask.context;return(0,H.jsxs)("div",{className:eP()["prompt-toast"],children:[e.showToast&&(0,H.jsxs)("div",{className:eP()["prompt-toast-inner"]+" clickable",role:"button",onClick:()=>e.setShowModal(!0),children:[(0,H.jsx)(T,{}),(0,H.jsx)("span",{className:eP()["prompt-toast-content"],children:eb.ZP.Context.Toast(n.length)})]}),e.showModal&&(0,H.jsx)(eA,{onClose:()=>e.setShowModal(!1)})]},"prompt-toast")}function eI(e){let t=0===e.prompts.length,[r,n]=(0,S.useState)(0),a=(0,S.useRef)(null);return((0,S.useEffect)(()=>{n(0)},[e.prompts.length]),(0,S.useEffect)(()=>{let s=s=>{if(t||s.metaKey||s.altKey||s.ctrlKey)return;let l=t=>{var l;s.stopPropagation(),s.preventDefault();let o=Math.max(0,Math.min(e.prompts.length-1,r+t));n(o),null===(l=a.current)||void 0===l||l.scrollIntoView({block:"center"})};if("ArrowUp"===s.key)l(1);else if("ArrowDown"===s.key)l(-1);else if("Enter"===s.key){let t=e.prompts.at(r);t&&e.onPromptSelect(t)}};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[t,r]),t)?null:(0,H.jsx)("div",{className:eM()["prompt-hints"],children:e.prompts.map((t,s)=>(0,H.jsxs)("div",{ref:s===r?a:null,className:eM()["prompt-hint"]+" ".concat(s===r?eM()["prompt-hint-selected"]:""),onClick:()=>e.onPromptSelect(t),onMouseEnter:()=>n(s),children:[(0,H.jsx)("div",{className:eM()["hint-title"],children:t.title}),(0,H.jsx)("div",{className:eM()["hint-content"],children:t.content})]},t.title+s.toString()))})}function eX(){let e=(0,ek.aK)();return(0,H.jsxs)("div",{className:eP()["clear-context"],onClick:()=>e.updateCurrentSession(e=>e.clearContextIndex=-1),children:[(0,H.jsx)("div",{className:eP()["clear-context-tips"],children:eb.ZP.Context.Clear}),(0,H.jsx)("div",{className:eP()["clear-context-revert-btn"],children:eb.ZP.Context.Revert})]})}function eL(e){let t=(0,ek.MG)(),r=(0,eN.s0)(),n=(0,ek.aK)(),a=t.theme,s=eE.L.hasPending(),l=()=>eE.L.stopAll();return(0,H.jsxs)("div",{className:eP()["chat-input-actions"],children:[s&&(0,H.jsx)("div",{className:"".concat(eP()["chat-input-action"]," clickable"),onClick:l,children:(0,H.jsx)(ev,{})}),!e.hitBottom&&(0,H.jsx)("div",{className:"".concat(eP()["chat-input-action"]," clickable"),onClick:e.scrollToBottom,children:(0,H.jsx)(ef,{})}),e.hitBottom&&(0,H.jsx)("div",{className:"".concat(eP()["chat-input-action"]," clickable"),onClick:e.showPromptModal,children:(0,H.jsx)(eo,{})}),(0,H.jsx)("div",{className:"".concat(eP()["chat-input-action"]," clickable"),onClick:function(){let e=[ek.Q2.Auto,ek.Q2.Light,ek.Q2.Dark],r=e.indexOf(a),n=(r+1)%e.length,s=e[n];t.update(e=>e.theme=s)},children:a===ek.Q2.Auto?(0,H.jsx)(ed,{}):a===ek.Q2.Light?(0,H.jsx)(ec,{}):a===ek.Q2.Dark?(0,H.jsx)(eh,{}):null}),(0,H.jsx)("div",{className:"".concat(eP()["chat-input-action"]," clickable"),onClick:e.showPromptHints,children:(0,H.jsx)($,{})}),(0,H.jsx)("div",{className:"".concat(eP()["chat-input-action"]," clickable"),onClick:()=>{r(eZ.y$.Masks)},children:(0,H.jsx)(q.Z,{})}),(0,H.jsx)("div",{className:"".concat(eP()["chat-input-action"]," clickable"),onClick:()=>{n.updateCurrentSession(e=>{e.clearContextIndex===e.messages.length?e.clearContextIndex=-1:(e.clearContextIndex=e.messages.length,e.memoryPrompt="")})},children:(0,H.jsx)(es,{})})]})}function eQ(){var e,t;let r=(0,ek.aK)(),[n,a]=(0,ek.aK)(e=>[e.currentSession(),e.currentSessionIndex]),s=(0,ek.MG)(),l=s.fontSize,o=(0,S.useRef)(null),[i,c]=(0,S.useState)(""),[m,h]=(0,S.useState)(!1),{submitKey:u,shouldSubmit:d}=function(){let e=(0,ek.MG)(),t=e.submitKey;return{submitKey:t,shouldSubmit:t=>"Enter"===t.key&&("Enter"!==t.key||!t.nativeEvent.isComposing)&&(e.submitKey===ek.mQ.AltEnter&&t.altKey||e.submitKey===ek.mQ.CtrlEnter&&t.ctrlKey||e.submitKey===ek.mQ.ShiftEnter&&t.shiftKey||e.submitKey===ek.mQ.MetaEnter&&t.metaKey||e.submitKey===ek.mQ.Enter&&!t.altKey&&!t.ctrlKey&&!t.shiftKey&&!t.metaKey)}}(),{scrollRef:p,setAutoScroll:f,scrollToBottom:g}=function(){let e=(0,S.useRef)(null),[t,r]=(0,S.useState)(!0),n=()=>{let t=e.current;t&&setTimeout(()=>t.scrollTop=t.scrollHeight,1)};return(0,S.useLayoutEffect)(()=>{t&&n()}),{scrollRef:e,autoScroll:t,setAutoScroll:r,scrollToBottom:n}}(),[v,k]=(0,S.useState)(!0),y=(0,ey.S0)(),w=(0,eN.s0)(),x=e=>{let t=e.scrollTop+e.clientHeight>=e.scrollHeight-100;k(t)},E=(0,e_.f)(),[_,b]=(0,S.useState)([]),j=W(e=>{b(E.search(e))},100,{leading:!0,trailing:!0}),C=e=>{var t;b([]),null===(t=o.current)||void 0===t||t.focus(),setTimeout(()=>c(e.content),60)},[M,O]=(0,S.useState)(2),P=W(()=>{let e=o.current?(0,ey.lx)(o.current):1,t=Math.min(20,Math.max(2+Number(!y),e));O(t)},100,{leading:!0,trailing:!0});(0,S.useEffect)(P,[i]);let D=e=>{c(e);let t=e.trim().length;0===t?b([]):!s.disablePromptHint&&t<30&&e.startsWith("/")&&j(e.slice(1))},N=e=>{var t;""!==e.trim()&&(h(!0),r.onUserInput(e).then(()=>h(!1)),localStorage.setItem(eZ.Sb,e),c(""),b([]),y||null===(t=o.current)||void 0===t||t.focus(),f(!0))},Z=e=>{eE.L.stop(a,e)};(0,S.useEffect)(()=>{r.updateCurrentSession(e=>{let t=Date.now()-eZ.tb;e.messages.forEach(e=>{(e.isError||new Date(e.date).getTime()<t)&&(e.streaming&&(e.streaming=!1),0===e.content.length&&(e.isError=!0,e.content=(0,ez.B)({error:!0,message:"empty response"})))}),e.mask.syncGlobalConfig&&(console.log("[Mask] syncing from global, name = ",e.mask.name),e.mask.modelConfig={...s.modelConfig})})},[]);let K=e=>{if("ArrowUp"===e.key&&i.length<=0&&!(e.metaKey||e.altKey||e.ctrlKey)){var t;c(null!==(t=localStorage.getItem(eZ.Sb))&&void 0!==t?t:""),e.preventDefault();return}d(e)&&0===_.length&&(N(i),e.preventDefault())},z=(e,t)=>{(0,ey.Ri)(e.currentTarget,t.content)&&e.preventDefault()},A=e=>{let t=null;for(let r=0;r<n.messages.length;r+=1){let a=n.messages[r];if(a.id===e)break;"user"===a.role&&(t=r)}return t},T=e=>{r.updateCurrentSession(t=>t.messages.splice(e,2))},I=e=>{let t=A(e);null!==t&&T(t)},L=e=>{var t;let a=A(e);if(null===a)return;h(!0);let s=n.messages[a].content;T(a),r.onUserInput(s).then(()=>h(!1)),null===(t=o.current)||void 0===t||t.focus()},B=n.mask.hideContext?[]:n.mask.context.slice(),G=(0,ek._X)();if(0===B.length&&(null===(e=n.messages.at(0))||void 0===e?void 0:e.content)!==ek.ux.content){let e=Object.assign({},ek.ux);G.isAuthorized()||(e.content=eb.ZP.Error.Unauthorized),B.push(e)}let Y=(null!==(t=n.clearContextIndex)&&void 0!==t?t:-1)>=0?n.clearContextIndex+B.length:-1,$=B.concat(n.messages).concat(m?[{...(0,ek.tn)({role:"assistant",content:"……"}),preview:!0}]:[]).concat(i.length>0&&s.sendPreviewBubble?[{...(0,ek.tn)({role:"user",content:i}),preview:!0}]:[]),[q,J]=(0,S.useState)(!1),et=()=>{let e=prompt(eb.ZP.Chat.Rename,n.topic);e&&e!==n.topic&&r.updateCurrentSession(t=>t.topic=e)},en=(0,eN.TH)(),ea=en.pathname===eZ.y$.Chat;return(0,eK.Y)({fill:c,submit:e=>{N(e)}}),(0,H.jsxs)("div",{className:eM().chat,children:[(0,H.jsxs)("div",{className:"window-header",children:[(0,H.jsxs)("div",{className:"window-header-title",children:[(0,H.jsx)("div",{className:'window-header-main-title " '.concat(eM()["chat-body-title"]),onClickCapture:et,children:n.topic?n.topic:ek.HX}),(0,H.jsx)("div",{className:"window-header-sub-title",children:eb.ZP.Chat.SubTitle(n.messages.length)})]}),(0,H.jsxs)("div",{className:"window-actions",children:[(0,H.jsx)("div",{className:"window-action-button "+eM().mobile,children:(0,H.jsx)(ej.h,{icon:(0,H.jsx)(F,{}),bordered:!0,title:eb.ZP.Chat.Actions.ChatList,onClick:()=>w(eZ.y$.Home)})}),(0,H.jsx)("div",{className:"window-action-button",children:(0,H.jsx)(ej.h,{icon:(0,H.jsx)(X,{}),bordered:!0,onClick:et})}),(0,H.jsx)("div",{className:"window-action-button",children:(0,H.jsx)(ej.h,{icon:(0,H.jsx)(Q,{}),bordered:!0,title:eb.ZP.Chat.Actions.Export,onClick:()=>{!function(e,t){let r="# ".concat(t,"\n\n")+e.map(e=>"user"===e.role?"## ".concat(eb.ZP.Export.MessageFromYou,":\n").concat(e.content):"## ".concat(eb.ZP.Export.MessageFromChatGPT,":\n").concat(e.content.trim())).join("\n\n"),n="".concat(t,".md");(0,eD.K4)({title:eb.ZP.Export.Title,children:(0,H.jsx)("div",{className:"markdown-body",children:(0,H.jsx)("pre",{className:eM()["export-content"],children:r})}),actions:[(0,H.jsx)(ej.h,{icon:(0,H.jsx)(U.Z,{}),bordered:!0,text:eb.ZP.Export.Copy,onClick:()=>(0,ey.vQ)(r)},"copy"),(0,H.jsx)(ej.h,{icon:(0,H.jsx)(V.Z,{}),bordered:!0,text:eb.ZP.Export.Download,onClick:()=>(0,ey.CP)(r,n)},"download")]})}(n.messages.filter(e=>!e.isError),n.topic)}})}),!y&&(0,H.jsx)("div",{className:"window-action-button",children:(0,H.jsx)(ej.h,{icon:s.tightBorder?(0,H.jsx)(er,{}):(0,H.jsx)(ee,{}),bordered:!0,onClick:()=>{s.update(e=>e.tightBorder=!e.tightBorder)}})})]}),(0,H.jsx)(eT,{showToast:!v,showModal:q,setShowModal:J})]}),(0,H.jsx)("div",{className:eM()["chat-body"],ref:p,onScroll:e=>x(e.currentTarget),onMouseDown:()=>{var e;return null===(e=o.current)||void 0===e?void 0:e.blur()},onWheel:e=>f(v&&e.deltaY>0),onTouchStart:()=>{var e;null===(e=o.current)||void 0===e||e.blur(),f(!1)},children:$.map((e,t)=>{var r,a,o;let i="user"===e.role,m=!i&&t>0&&!(e.preview||0===e.content.length),h=e.preview||e.streaming;return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)("div",{className:i?eM()["chat-message-user"]:eM()["chat-message"],children:(0,H.jsxs)("div",{className:eM()["chat-message-container"],children:[(0,H.jsx)("div",{className:eM()["chat-message-avatar"],children:"user"===e.role?(0,H.jsx)(eH.qE,{avatar:s.avatar}):(0,H.jsx)(eS.MaskAvatar,{mask:n.mask})}),h&&(0,H.jsx)("div",{className:eM()["chat-message-status"],children:eb.ZP.Chat.Typing}),(0,H.jsxs)("div",{className:eM()["chat-message-item"],children:[m&&(0,H.jsxs)("div",{className:eM()["chat-message-top-actions"],children:[e.streaming?(0,H.jsx)("div",{className:eM()["chat-message-top-action"],onClick:()=>Z(null!==(r=e.id)&&void 0!==r?r:t),children:eb.ZP.Chat.Actions.Stop}):(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)("div",{className:eM()["chat-message-top-action"],onClick:()=>I(null!==(a=e.id)&&void 0!==a?a:t),children:eb.ZP.Chat.Actions.Delete}),(0,H.jsx)("div",{className:eM()["chat-message-top-action"],onClick:()=>L(null!==(o=e.id)&&void 0!==o?o:t),children:eb.ZP.Chat.Actions.Retry})]}),(0,H.jsx)("div",{className:eM()["chat-message-top-action"],onClick:()=>(0,ey.vQ)(e.content),children:eb.ZP.Chat.Actions.Copy})]}),(0,H.jsx)(eR,{content:e.content,loading:(e.preview||0===e.content.length)&&!i,onContextMenu:t=>z(t,e),onDoubleClickCapture:()=>{y&&c(e.content)},fontSize:l,parentRef:p,defaultShow:t>=$.length-10})]}),!i&&!e.preview&&(0,H.jsx)("div",{className:eM()["chat-message-actions"],children:(0,H.jsx)("div",{className:eM()["chat-message-action-date"],children:e.date.toLocaleString()})})]})},t),t===Y-1&&(0,H.jsx)(eX,{})]})})}),(0,H.jsxs)("div",{className:eM()["chat-input-panel"],children:[(0,H.jsx)(eI,{prompts:_,onPromptSelect:C}),(0,H.jsx)(eL,{showPromptModal:()=>J(!0),scrollToBottom:g,hitBottom:v,showPromptHints:()=>{var e;if(_.length>0){b([]);return}null===(e=o.current)||void 0===e||e.focus(),c("/"),j("")}}),(0,H.jsxs)("div",{className:eM()["chat-input-panel-inner"],children:[(0,H.jsx)("textarea",{ref:o,className:eM()["chat-input"],placeholder:eb.ZP.Chat.Input(u),onInput:e=>D(e.currentTarget.value),value:i,onKeyDown:K,onFocus:()=>f(!0),onBlur:()=>f(!1),rows:M,autoFocus:!y||ea}),(0,H.jsx)(ej.h,{icon:(0,H.jsx)(R,{}),text:eb.ZP.Chat.Send,className:eM()["chat-input-send"],type:"primary",onClick:()=>N(i)})]})]})]},n.id)}},7598:function(e,t,r){r.d(t,{f:function(){return c},o:function(){return i}});var n=r(2561),a=r(4475),s=r(184),l=r(5262),o=r(6819);let i={ready:!1,builtinEngine:new s.Z([],{keys:["title"]}),userEngine:new s.Z([],{keys:["title"]}),count:{builtin:0},allPrompts:[],builtinPrompts:[],init(e,t){this.ready||(this.allPrompts=t.concat(e),this.builtinPrompts=e.slice(),this.builtinEngine.setCollection(e),this.userEngine.setCollection(t),this.ready=!0)},remove(e){this.userEngine.remove(t=>t.id===e)},add(e){this.userEngine.add(e)},search(e){let t=this.userEngine.search(e),r=this.builtinEngine.search(e);return t.concat(r).map(e=>e.item)}},c=(0,n.Ue)()((0,a.tJ)((e,t)=>({counter:0,latestId:0,prompts:{},add(r){let n=t().prompts;return r.id=t().latestId+1,r.isUser=!0,n[r.id]=r,e(()=>({latestId:r.id,prompts:n})),r.id},get(e){let r=t().prompts[e];return r||i.builtinPrompts.find(t=>t.id===e)},remove(r){let n=t().prompts;delete n[r],i.remove(r),e(()=>({prompts:n,counter:t().counter+1}))},getUserPrompts(){var e;let r=Object.values(null!==(e=t().prompts)&&void 0!==e?e:{});return r.sort((e,t)=>t.id&&e.id?t.id-e.id:0),r},update(r,n){var a;let s=null!==(a=t().prompts[r])&&void 0!==a?a:{title:"",content:"",id:r};i.remove(r),n(s);let l=t().prompts;l[r]=s,e(()=>({prompts:l})),i.add(s)},search:e=>0===e.length?i.allPrompts.concat([...t().getUserPrompts()]):i.search(e)}),{name:o.KJ.Prompt,version:1,onRehydrateStorage(e){fetch("./prompts.json").then(e=>e.json()).then(e=>{var t;let r=[e.en,e.cn];"cn"===(0,l.VQ)()&&(r=r.reverse());let n=r.map(e=>e.map(e=>{let[t,r]=e;return{id:Math.random(),title:t,content:r}})),a=null!==(t=c.getState().getUserPrompts())&&void 0!==t?t:[],s=n.reduce((e,t)=>e.concat(t),[]).filter(e=>!!e.title&&!!e.content);i.count.builtin=e.en.length+e.cn.length,i.init(s,a)})}}))}}]);